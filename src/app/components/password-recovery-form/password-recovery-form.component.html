<div class="login-container">
  <div class="d-flex align-items-center justify-content-center h-100">
    <div class="login-card">
      <div class="w-100">
        <div class="text-center">
          <app-logo-titulo></app-logo-titulo>
        </div>
        <div class="login-main">
          <form [formGroup]="form" (ngSubmit)="handleSubmit($event)" autocomplete="off">
            <div class="mb-3">
              <h1 class="text-center">Recuperar Contraseña</h1>
              <small style="color: #4f4f4f">
                Ingresa tu email para recibir un código de recuperación
              </small>
            </div>

            <div class="form-group mb-3">
              <label for="email" class="form-label mb-2">
                Correo Electrónico
              </label>
              <input 
                id="email" 
                formControlName="email" 
                type="email" 
                class="form-control" 
                placeholder="ejemplo@gmail.com"
                [ngClass]="{
                  'is-invalid': form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched),
                  'is-valid': form.controls['email'].valid && (form.controls['email'].dirty || form.controls['email'].touched)
                }" />
              @if (form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)) {
                <div class="invalid-feedback">
                  Por favor ingresa un email válido
                </div>
              }
            </div>

            <div class="form-group mb-4">
              <button class="btn btn-block w-100" type="submit" style="background-color: #1b8159; color: #fff;" [disabled]="isLoading || form.invalid">
                @if(isLoading) {
                  <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                  Enviando...
                } @else {
                  Enviar Código
                }
              </button>
              @if(recoveryError) {
                <p class="text-danger mt-2">{{recoveryError}}</p>
              }
              @if(successMessage) {
                <p class="text-success mt-2">{{successMessage}}</p>
              }
            </div>
            
            <div class="text-center">
              <a routerLink="/login" style="color: #1b8159;">Volver al Login</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
